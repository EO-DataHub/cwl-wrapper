rulez:
  version: 1

parser:
  type: $graph
  driver: cwl

onstage:
  driver: cwl

  stage_in:
    connection_node: node_stage_in
    if_scatter:
      scatterMethod: dotproduct

  on_stage:
    connection_node: on_stage

  stage_out:
    connection_node: node_stage_out


output:
  driver: cwl
  name: '-'
  type: $graph


cwl:
  GlobalInput:
    Directory: string
    Directory[]: string[]

  stage_in:
    Directory:
      type: string
      inputBinding:
        position: 2

    Directory[]:
      type: string[]
      inputBinding:
        position: 2

  stage_out:
    Directory:
      type: Directory
      inputBinding:
        position: 1

    Directory[]:
      type: Directory[]
      inputBinding:
        position: 1


  outputBindingResult:
    command:
      outputBinding:
        glob: .
      type: Directory
    stepOut:
      type:
        items: Directory
        type: array



