rulez:
  version: 1

parser:
  type: $graph
  driver: cwl

onstage:
  driver: cwl

  stage_in:
    connection_node: node_stage_in
    if_scatter:
      scatterMethod: dotproduct

  on_stage:
    connection_node: on_stage

  stage_out:
    scatter: False
    if_scatter:
      scatterMethod: dotproduct
    connection_node: node_stage_out


output:
  driver: cwl
  name: '-'
  type: $graph


cwl:
  GlobalInput:
    Directory: string
    Directory[]: string[]

  stage_in:
    Directory:
      type: string
      inputBinding:
        position: 2

    Directory[]:
      type: string[]
      inputBinding:
        position: 2

  stage_out:
    Directory:
      type: Directory
      inputBinding:
        position: 6

    Directory[]:
      type: Directory[]
      inputBinding:
        position: 6

    # only dict
    user_inputs:
      job:
        id: 'job'
        label: ''
        doc: ''
        type: string
      store_host:
        id: 'store_host'
        label: ''
        doc: ''
        type: string
      store_username:
        id: 'store_username'
        label: ''
        doc: ''
        type: string
      store_apikey:
        id: 'store_apikey'
        label: ''
        doc: ''
        type: string
      outputfile:
        id: 'outputfile'
        label: ''
        doc: ''
        type: string

  outputBindingResult:
    command:
      Directory:
        outputBinding:
          glob: .
        type: Directory
      Directory[]:
        outputBinding:
          glob: .
        type: Directory[]


    stepOut:
      type:
        items: Directory
        type: array



